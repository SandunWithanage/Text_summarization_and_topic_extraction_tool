from bertopic import BERTopic
import re

def extract_topics(text):
    # More robust sentence splitting using regex (handles punctuation)
    sentences = re.split(r'(?<=[.!?])\s+', text.strip())
    sentences = [s for s in sentences if s]  
    
    
    topic_model = BERTopic()
    
    
    topics, _ = topic_model.fit_transform(sentences)
    
    return topic_model, topics, sentences

